# Widgetbook Cloud Review

<Warning>
  Widgetbook Cloud Review currently only works with GitHub, we are planning to
  add more Git providers in the future.
</Warning>

Widgetbook Cloud introduces a _Review_ feature, a zero-configuration UI regression detection tool that you can get out-of-the-box if you have Widgetbook setup for your project.

| GitHub PRs                                                       | Widgetbook Cloud Reviews                                             |
| ---------------------------------------------------------------- | -------------------------------------------------------------------- |
| Compare **code changes** between `base` commit and `head` commit | Compare **visual differences** between `base` build and `head` build |

## Pre-requisites

1. Connect your Widgetbook Project to a GitHub repo from the project settings page.
1. Make sure to you have a [Widgetbook Build](/widgetbook-cloud/hosting) on pushes of new commits via CI (e.g. GitHub Actions).
1. _[Optional]_ [Add Figma URL](#widgetbook-x-figma) to your use-cases.

## Guide

1. Create a new branch (e.g. `feat/new-button`) and commit your changes to it.
1. [Create a pull request](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/creating-a-pull-request) from your `head` branch (e.g. `feat/new-button`) to the `base` branch (e.g. `main`).
1. After your build upload finishes (i.e. the CI job from [Pre-requisites](#pre-requisites)), a [commit status](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/collaborating-on-repositories-with-code-quality-features/about-status-checks) will be added to your PR once the review is ready.

## Review Statuses

| Status   | Description                                             |
| -------- | ------------------------------------------------------- |
| Open     | Awaiting assessment.                                    |
| Merged   | Linked with merged PRs, thus considered merged.         |
| Closed   | Associated with closed PRs, hence viewed as closed.     |
| Updating | Missing crucial information for an open classification. |

## Widgetbook x Figma

To have "View in Figma" button in your reviews, you need to add the Figma URL to your use-cases:

1. In you Figma design file, navigate to the component that resembles your Widget.
1. Copy the link to the component by right-mouse clicking on the component and selecting `Copy/Paste as` > `Copy Link`.
1. Set the `designLink` property of the `@UseCase` annotation by pasting the copied link.

   ```dart
   // Example from https://github.com/widgetbook/groceries-demo/blob/main/widgetbook/lib/core/app_bar.dart
   @UseCase(
     designLink: 'https://www.figma.com/file/EXuEpwiyksLAejYX1qr1v4/Fluttercon-Berlin-2023-Demo?type=design&node-id=277-3056&mode=design&t=nVL8hLmc1jlcilZL-4',
     name: 'Default',
     type: AppBar
   )
   ```

1. Re-run `build_runner` to update the use-cases metadata.

   ```bash
   dart run build_runner build -d
   ```

1. Commit your changes and push them to your repository; to create a new build.
